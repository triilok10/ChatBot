@{
    ViewData["Title"] = "AIDashBoard";
    Layout = null;
}

<link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
<script src="~/lib/jquery/dist/jquery.min.js"></script>
<script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
<script src="~/js/site.js" asp-append-version="true"></script>
<script src="~/js/toastr.min.js"></script>
<link href="~/js/toastr.min.css" rel="stylesheet" />

<style>
    .chat-container {
        display: flex;
        height: 100vh;
        padding: 10px;
        flex-wrap: wrap;
    }

    .user-info {
        width: 30%;
        background-color: #f1f1f1;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        display: flex;
        flex-direction: column;
    }

    .chat-history {
        flex-grow: 1;
        overflow-y: auto;
        margin-top: 10px;
    }

    .user-message, .bot-message {
        margin-bottom: 15px;
    }

    .user-message {
        background-color: #007bff;
        color: white;
        padding: 10px;
        border-radius: 10px;
        align-self: flex-end;
        max-width: 75%;
    }

    .bot-message {
        background-color: #e0e0e0;
        padding: 10px;
        border-radius: 10px;
        align-self: flex-start;
        max-width: 75%;
    }

    .chat-area {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        justify-content: center; /* Center content vertically */
        align-items: center; /* Center content horizontally */
        text-align: center; /* Center text */
    }

    .chat-area h2 {
        font-size: 32px; /* Larger font size */
        color: #333;
    }

    .ai-assistant-btn {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #28a745;
        color: white;
        border: none;
        padding: 15px;
        border-radius: 50%;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        cursor: pointer;
    }

    .ai-assistant-btn:hover {
        background-color: #218838;
    }

    .modal-dialog {
        max-width: 400px;
    }

    .modal-content {
        border-radius: 8px; 
    }

    @@media (max-width: 768px) {
      .chat-container {
          flex-direction: column; /* Stack elements vertically on small screens */
      }
      .user-info, .chat-area {
          width: 100%; /* Full width */
          margin-bottom: 10px; /* Space between sections */
      }
      .ai-assistant-btn {
          bottom: 15px; /* Adjust button position */
          right: 15px; /* Adjust button position */
      }
   }
</style>

<div class="chat-container">
    
    <div class="user-info">
       <span>User Info:</span>
       <span>John Doe</span>
       <h5>Chat History:</h5>
       <div class="chat-history">
           <div class="user-message">Hi! How are you?</div>
           <div class="bot-message">Hello! I'm here to help you. How can I assist you today?</div>
       </div>
       <button onclick="logout()" class="btn btn-danger">Logout</button>
   </div>

   <div class="chat-area">
       <h2>AI Powered Conversational Chatbot</h2>
   </div>

</div>

<button class="ai-assistant-btn" onclick="openAssistantModal()">AI Assistant</button>

<div class="modal fade" id="assistantModal" tabindex="-1" aria-labelledby="assistantModalLabel" aria-hidden="true">
   <div class="modal-dialog">
       <div class="modal-content">
           <div class="modal-header">
               <h5 class="modal-title" id="assistantModalLabel">AI Assistant</h5>
               <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
           </div>
           <div class="modal-body">
               <input type="text" id="assistantQuery" placeholder="Ask your question..." class="form-control"/>
           </div>
           <div class="modal-footer">
               <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
               <button type="button" class="btn btn-primary" onclick="askAssistant()">Ask</button>
           </div>
       </div>
   </div>
</div>

<script>
   function logout() {
       alert("Logging out...");
   }

   function openAssistantModal() {
       const modal = new bootstrap.Modal(document.getElementById('assistantModal'));
       modal.show();
   }

   function askAssistant() {
       const query = document.getElementById('assistantQuery').value;

       if (query) {
           // Here you would typically send the query to your Rasa server and handle the response.
           alert(`You asked the assistant: ${query}`);
           document.getElementById('assistantQuery').value = ''; // Clear input
       } else {
           alert("Please enter a question.");
       }
   }
</script>